<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat - AbueClick</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style/style.css">
  <link rel="stylesheet" href="style/stylechat.css">
  <style>
    html {
      scroll-behavior: smooth;
    }
  </style>
</head>
<body>
  <div class="sitio">
    <header id="barra-navegacion">
      <div class="nav-izquierda">
        <div class="marca">
          <img src="resources/img/Imagotipo.png" alt="AbueClick" class="logo-navegacion">
        </div>
        <nav>
          <ul class="menu-navegacion">
            <li><a href="index.html">Inicio</a></li>
            <li><a href="sobre-nosotros.html">Sobre nosotros</a></li>
            <li><a href="#pie-pagina">Contacto</a></li>
          </ul>
        </nav>
      </div>
      <div class="nav-derecha">
        <form class="formulario-busqueda" role="search" onsubmit="return false;">
          <input class="entrada-busqueda" type="search" placeholder="Buscar..." aria-label="Buscar">
        </form>
        <a href="notificaciones.html" class="boton-notificaciones" aria-label="Notificaciones" title="Notificaciones" id="enlaceNotificaciones">
          <span class="icono-notificacion">游댒</span>
          <span class="insignia-notificacion" id="insigniaNotificacion" style="display: none;">0</span>
        </a>
        <a href="chat.html" class="boton-chat" aria-label="Chat" title="Chat">
          <span class="icono-chat">游눫</span>
        </a>
        <a href="perfil.html" class="boton-perfil" aria-label="Perfil" title="Perfil">
          <span class="circulo-avatar" id="avatarUsuario">AC</span>
        </a>
      </div>
    </header>

    <main class="chat-main">
      <div class="chat-container">
        <aside class="conversaciones-sidebar">
          <h2>Conversaciones</h2>
          <div id="listaConversaciones" class="lista-conversaciones">
          </div>
          <div id="sinConversaciones" class="sin-conversaciones" style="display: none;">
            <p>No tienes conversaciones activas.</p>
            <p class="sin-conversaciones-hint">Las conversaciones aparecen cuando agendas una cita con un acompa침ante. Una vez agendada la cita, podr치s chatear con el acompa침ante contratado.</p>
          </div>
        </aside>

        <div class="chat-area">
          <div id="chatVacio" class="chat-vacio">
            <div class="chat-vacio-content">
              <span class="chat-vacio-icon">游눫</span>
              <h2>Selecciona una conversaci칩n</h2>
              <p>Elige una conversaci칩n de la lista para comenzar a chatear</p>
            </div>
          </div>

          <div id="chatActivo" class="chat-activo" style="display: none;">
            <div class="chat-header">
              <div class="chat-header-info">
                <span class="chat-avatar" id="avatarChat">AC</span>
                <div>
                  <h3 id="nombreChat">Nombre del contacto</h3>
                  <p id="servicioChat" class="chat-servicio">Servicio</p>
                </div>
              </div>
            </div>

            <div class="chat-mensajes" id="mensajesChat">
            </div>

            <div class="chat-input-container">
              <form id="formularioEnviarMensaje" class="chat-form">
                <input 
                  type="text" 
                  id="entradaMensaje" 
                  class="chat-input" 
                  placeholder="Escribe un mensaje..." 
                  autocomplete="off"
                >
                <button type="submit" class="chat-send-btn" aria-label="Enviar mensaje">
                  <span>Enviar</span>
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer id="pie-pagina">
      <div class="contenedor-pie-pagina">
        <div class="columna-pie-pagina">
          <h3 class="titulo-pie-pagina">ABUECLICK</h3>
          <h4 class="subtitulo-pie-pagina">CONT츼CTANOS</h4>
          <div class="item-contacto-pie-pagina">
            <span class="icono-pie-pagina">游</span>
            <div>
              <p class="etiqueta-pie-pagina">L칤nea de servicio</p>
              <p class="valor-pie-pagina">+57 314 6904576</p>
            </div>
          </div>
          <div class="item-contacto-pie-pagina">
            <span class="icono-pie-pagina">游닎</span>
            <div>
              <p class="etiqueta-pie-pagina">Correo electr칩nico</p>
              <p class="valor-pie-pagina">AbueClick@gmail.com</p>
            </div>
          </div>
          <div class="item-contacto-pie-pagina">
            <span class="icono-pie-pagina">游눫</span>
            <div>
              <p class="etiqueta-pie-pagina">WhatsApp</p>
              <p class="valor-pie-pagina">+57 314 6904576</p>
            </div>
          </div>
        </div>

        <div class="columna-pie-pagina">
          <h3 class="titulo-pie-pagina">INFORMACI칍N</h3>
          <h4 class="subtitulo-pie-pagina">POL칈TICAS</h4>
          <ul class="enlaces-pie-pagina">
            <li><a href="#">Pol칤tica de privacidad</a></li>
            <li><a href="#">T칠rminos y condiciones</a></li>
            <li><a href="#">Pol칤tica de cookies</a></li>
          </ul>
          <h4 class="subtitulo-pie-pagina" style="margin-top: 20px;">ENLACES</h4>
          <ul class="enlaces-pie-pagina">
            <li><a href="index.html">Inicio</a></li>
            <li><a href="sobre-nosotros.html">Sobre nosotros</a></li>
            <li><a href="login.html">Iniciar sesi칩n</a></li>
            <li><a href="registro.html">Registrarse</a></li>
          </ul>
        </div>

        <div class="columna-pie-pagina">
          <h3 class="titulo-pie-pagina">REDES SOCIALES</h3>
          <div class="redes-pie-pagina">
            <a href="#" class="enlace-red-social">Facebook</a>
            <a href="#" class="enlace-red-social">Instagram</a>
            <a href="#" class="enlace-red-social">Twitter</a>
            <a href="#" class="enlace-red-social">LinkedIn</a>
          </div>
          <div class="actualizacion-pie-pagina">
            <p class="etiqueta-pie-pagina">Fecha 칰ltima actualizaci칩n</p>
            <p class="valor-pie-pagina">2025</p>
          </div>
        </div>
      </div>
      <div class="fondo-pie-pagina">
        <p>춸 2025 AbueClick. Todos los derechos reservados.</p>
      </div>
    </footer>
  </div>

  <script src="js/autenticacion.js"></script>
  <script src="js/boton-admin.js"></script>
  <script src="js/servicio.js"></script>
  <script src="js/chat.js"></script>
  <script src="js/notificaciones.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const usuarioActual = verificarSesion();
      if (!usuarioActual) {
        window.location.href = 'login.html';
        return;
      }
      actualizarAvatarGlobal();
      actualizarBadgeNotificaciones();
      cargarConversaciones();
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="js/texto-a-voz.js"></script>
</body>
</html>

